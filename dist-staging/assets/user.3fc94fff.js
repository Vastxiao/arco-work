var $=Object.defineProperty,j=Object.defineProperties;var M=Object.getOwnPropertyDescriptors;var C=Object.getOwnPropertySymbols;var V=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable;var D=(e,a,l)=>a in e?$(e,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[a]=l,v=(e,a)=>{for(var l in a||(a={}))V.call(a,l)&&D(e,l,a[l]);if(C)for(var l of C(a))P.call(a,l)&&D(e,l,a[l]);return e},B=(e,a)=>j(e,M(a));import{_ as J,p as q,g as G}from"./index.353524b8.js";import{u as Q,d as W,b as X,a as Y,e as Z,c as ee}from"./table.11835550.js";import{d as te,a as A,w as ae,e as ne,r as n,o as r,c as k,m as t,j as u,h as ue,V as I,g as le,N as oe,as as se,O as c,P as S,F as ie,M as w,L as T,ab as de}from"./vendor.98fdfd48.js";const re=te({name:"UserList",setup(){const e=Q(),a=ee("id"),l=W(m),{selectedRowKeys:p,onSelectionChange:x}=X(),y=[{title:"\u4E1C\u90E8\u5730\u533A",key:1,children:[{title:"\u603B\u88C1\u90E8",key:11},{title:"\u8D22\u52A1\u90E8",key:12},{title:"\u6280\u672F\u90E8",key:13},{title:"\u9500\u552E\u90E8",key:14}]},{title:"\u897F\u90E8\u5730\u533A",key:2,children:[{title:"\u603B\u88C1\u90E8",key:21},{title:"\u8D22\u52A1\u90E8",key:22},{title:"\u6280\u672F\u90E8",key:23},{title:"\u9500\u552E\u90E8",key:24}]},{title:"\u5357\u90E8\u5730\u533A",key:3,children:[{title:"\u603B\u88C1\u90E8",key:31},{title:"\u8D22\u52A1\u90E8",key:32},{title:"\u6280\u672F\u90E8",key:33},{title:"\u9500\u552E\u90E8",key:34}]},{title:"\u5317\u90E8\u5730\u533A",key:4,children:[{title:"\u603B\u88C1\u90E8",key:41},{title:"\u8D22\u52A1\u90E8",key:42},{title:"\u6280\u672F\u90E8",key:43},{title:"\u9500\u552E\u90E8",key:44}]}],f=Y([e.indexColumn,{title:"\u540D\u79F0",key:"nickName",dataIndex:"nickName",width:150},{title:"\u6027\u522B",key:"gender",dataIndex:"gender",width:80},{title:"\u5934\u50CF",key:"avatar",dataIndex:"avatar",width:80},{title:"\u5730\u5740",key:"address",dataIndex:"address",width:150},{title:"\u767B\u5F55\u65F6\u95F4",key:"lastLoginTime",dataIndex:"lastLoginTime",width:150},{title:"\u767B\u5F55IP",key:"lastLoginIp",dataIndex:"lastLoginIp",width:150},{title:"\u72B6\u6001",key:"status",dataIndex:"status",width:80},{title:"\u64CD\u4F5C",key:"actions",fixed:"right",width:80,dataIndex:"actions"}]),g=A(!0);function m(){q({url:G,data:()=>({page:l.page,pageSize:l.pageSize})}).then(s=>{e.handleSuccess(s),l.setTotalSize(s.totalSize)}).catch(console.log)}function _(){if(p.value.length===0){w.error("\u8BF7\u9009\u62E9\u8981\u5220\u9664\u7684\u6570\u636E");return}T.confirm({title:"\u63D0\u793A",content:"\u786E\u5B9A\u8981\u5220\u9664\u6B64\u6570\u636E\u5417\uFF1F",cancelText:"\u53D6\u6D88",okText:"\u5220\u9664",onOk:()=>{w.success("\u6570\u636E\u6A21\u62DF\u5220\u9664\u6210\u529F\uFF0C\u6240\u9009\u62E9\u7684Keys\u4E3A\uFF1A"+JSON.stringify(p.value))}})}function h(s){T.confirm({title:"\u63D0\u793A",content:"\u786E\u5B9A\u8981\u5220\u9664\u6B64\u6570\u636E\u5417\uFF1F",cancelText:"\u53D6\u6D88",okText:"\u5220\u9664",onOk:()=>{w.success("\u6570\u636E\u5220\u9664\u6210\u529F"),e.dataList.splice(e.dataList.indexOf(s),1)}})}function E(s){d.value=[...s]}const d=A(y.map(s=>s.key));return ae(()=>g.value,s=>{s?d.value=y.map(b=>b.key):d.value=[]}),ne(async()=>{e.tableHeight.value=await Z(de()),m()}),B(v({},e),{rowKey:a,selectedRowKeys:p,onSelectionChange:x,expandAllFlag:g,departmentData:y,tableColumns:f,pagination:l,onDeleteItem:h,onDeleteItems:_,getExpandedKeys:d,onUpdateExpandedKeys:E})}});function ce(e,a,l,p,x,y){const f=n("a-input"),g=n("a-switch"),m=n("a-space"),_=n("a-tree"),h=n("Scrollbar"),E=n("a-card"),d=n("a-col"),s=n("DeleteButton"),b=n("TableHeader"),F=n("a-tag"),K=n("IconUser"),L=n("a-avatar"),z=n("a-button"),R=n("a-table-column"),H=n("a-table"),N=n("TableFooter"),U=n("TableBody"),O=n("a-row");return r(),k(O,{gutter:10},{default:t(()=>[u(d,{span:5},{default:t(()=>[u(E,{class:"h-full",bodyStyle:{padding:"5px"},headerStyle:{padding:"5px"}},{default:t(()=>[u(m,null,{default:t(()=>[u(f,{class:"mr-2",placeholder:"\u641C\u7D22",size:"small"}),u(g,{size:"small","model-value":e.expandAllFlag,"onUpdate:model-value":a[0]||(a[0]=o=>e.expandAllFlag=o)},null,8,["model-value"])]),_:1}),ue("div",{class:"mt-4",style:I({height:e.tableHeight+80+"px",overflow:"auto"})},[u(h,null,{default:t(()=>[u(_,{"expanded-keys":e.getExpandedKeys,"onUpdate:expanded-keys":a[1]||(a[1]=o=>e.getExpandedKeys=o),data:e.departmentData,checkable:""},null,8,["expanded-keys","data"])]),_:1})],4)]),_:1})]),_:1}),u(d,{span:19},{default:t(()=>[u(U,null,{header:t(()=>[u(b,{ref:"tableHeaderRef","show-filter":!1},{"top-right":t(()=>[u(s,{onDelete:e.onDeleteItems},null,8,["onDelete"])]),_:1},512)]),default:t(()=>[u(H,{bordered:!1,"row-selection":{selectedRowKeys:e.selectedRowKeys},loading:e.tableLoading,data:e.dataList,pagination:!1,rowKey:e.rowKey,"table-layout-fixed":"",scroll:{y:e.tableHeight,x:1e3},onSelectionChange:e.onSelectionChange},{columns:t(()=>[(r(!0),le(ie,null,oe(e.tableColumns,o=>(r(),k(R,{key:o.key,align:o.align,title:o.title,width:o.width,"data-index":o.key,fixed:o.fixed},se({_:2},[o.key==="index"?{name:"cell",fn:t(({rowIndex:i})=>[c(S(i+1),1)])}:o.key==="gender"?{name:"cell",fn:t(({record:i})=>[u(F,{color:i.gender===1?"green":"red"},{default:t(()=>[c(S(i.gender===1?"\u7537":"\u5973"),1)]),_:2},1032,["color"])])}:o.key==="avatar"?{name:"cell",fn:t(({})=>[u(L,{size:"30",style:I({backgroundColor:"var(--color-primary-light-1)"})},{default:t(()=>[u(K)]),_:1},8,["style"])])}:o.key==="actions"?{name:"cell",fn:t(({record:i})=>[u(z,{status:"danger",onClick:pe=>e.onDeleteItem(i),size:"mini"},{default:t(()=>[c("\u5220\u9664")]),_:2},1032,["onClick"])])}:o.key==="status"?{name:"cell",fn:t(({record:i})=>[i.status===1?(r(),k(F,{key:0,color:"blue",size:"small"},{default:t(()=>[c("\u6B63\u5E38")]),_:1})):(r(),k(F,{key:1,color:"red",size:"small"},{default:t(()=>[c("\u7981\u7528")]),_:1}))])}:void 0]),1032,["align","title","width","data-index","fixed"]))),128))]),_:1},8,["row-selection","loading","data","rowKey","scroll","onSelectionChange"])]),footer:t(()=>[u(N,{ref:"tableFooterRef",pagination:e.pagination},null,8,["pagination"])]),_:1})]),_:1})]),_:1})}var fe=J(re,[["render",ce]]);export{fe as default};
