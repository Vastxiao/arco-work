var L=Object.defineProperty,j=Object.defineProperties;var P=Object.getOwnPropertyDescriptors;var V=Object.getOwnPropertySymbols;var H=Object.prototype.hasOwnProperty,J=Object.prototype.propertyIsEnumerable;var M=(a,o,r)=>o in a?L(a,o,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[o]=r,N=(a,o)=>{for(var r in o||(o={}))H.call(o,r)&&M(a,r,o[r]);if(V)for(var r of V(o))J.call(o,r)&&M(a,r,o[r]);return a},T=(a,o)=>j(a,P(o));import{d as K,a as c,M as F,e as R,r as d,o as v,g as B,j as f,m as n,F as S,N as z,c as m,as as G,O as _,P as C,q as Q,k as D,n as W,L as X}from"./vendor.98fdfd48.js";import{_ as Y,p as Z,h as ee}from"./index.353524b8.js";import{u as ae,a as ue,c as le}from"./table.11835550.js";const ne=K({name:"Menu",setup(){const a=c("add"),o=ae(),r=c([]),h=c(null),I=c(),U=le("menuUrl"),g=ue([{title:"\u83DC\u5355\u540D\u79F0",key:"menuName",dataIndex:"menuName"},{title:"\u83DC\u5355\u5730\u5740",key:"menuUrl",dataIndex:"menuUrl"},{title:"\u83DC\u5355\u56FE\u6807",key:"icon",dataIndex:"icon"},{title:"\u662F\u5426\u7F13\u5B58",key:"cacheable",dataIndex:"cacheable"},{title:"\u662F\u5426\u9690\u85CF",key:"hidden",dataIndex:"hidden"},{title:"\u662F\u5426\u56FA\u5B9A\u6807\u9898\u680F",key:"affix",dataIndex:"affix"},{title:"\u64CD\u4F5C",key:"actions",dataIndex:"actions"}]),p=[{label:"\u4E0A\u7EA7\u83DC\u5355",key:"parentPath",value:c(""),placeholder:"\u8BF7\u9009\u62E9\u4E0A\u7EA7\u83DC\u5355",type:"tree-select",reset:function(){this.value.value=""}},{label:"\u83DC\u5355\u540D\u79F0",key:"menuName",required:!0,type:"input",placeholder:"\u8BF7\u8F93\u5165\u83DC\u5355\u540D\u79F0",value:c(""),validator:function(){return this.value.value?!0:(F.error(this.placeholder||""),!1)},reset:function(){this.value.value=""}},{label:"\u83DC\u5355\u5730\u5740",key:"menuUrl",required:!0,value:c(""),type:"input",disabled:c(!1),placeholder:"\u8BF7\u8F93\u5165\u83DC\u5355\u5730\u5740",validator:function(){return this.value.value?!0:(F.error(this.placeholder||""),!1)},reset:function(){this.value.value=""}},{label:"\u5916\u94FE\u5730\u5740",key:"redirect",type:"input",placeholder:"\u8BF7\u8F93\u5165\u5916\u94FE\u5730\u5740",value:c(""),reset:function(){this.value.value=""}},{label:"\u83DC\u5355\u56FE\u6807",key:"icon",type:"icon",value:c(""),reset:function(){this.value.value=""}},{label:"\u662F\u5426\u7F13\u5B58",key:"cacheable",type:"switch",value:c(!1),reset:function(){this.value.value=!1}},{label:"\u662F\u5426\u9690\u85CF",key:"hidden",type:"switch",value:c(!1),reset:function(){this.value.value=!1}},{label:"\u662F\u5426\u56FA\u5B9A",key:"affix",type:"switch",value:c(!1),reset:function(){this.value.value=!1}}];function y(s,i="/"){const l=[];return s.filter(t=>t.hidden!==!0&&t.fullPath!==i).forEach(t=>{const b={key:t.menuUrl,title:t.menuName};t.children&&t.children.length>0&&(b.children=y(t.children,t.fullPath)),l.push(b)}),l}function k(){Z({url:ee,data:{}}).then(o.handleSuccess).then(s=>{r.value=y(s)}).catch(console.log)}function A(){var s;a.value="add",p.forEach(i=>{i.reset&&i.reset()}),(s=h.value)==null||s.show()}function w(s){var i;a.value="edit",p.forEach(l=>{l.value.value=s[l.key]||null,l.key==="menuUrl"&&l.disabled&&(l.disabled.value=!0)}),(i=h.value)==null||i.show()}function E(){var s,i;a.value==="add"?p.every(l=>l.validator?l.validator():!0)&&((s=h.value)==null||s.close(),F.success("\u6A21\u62DF\u521B\u5EFA\u83DC\u5355\u6210\u529F, \u53C2\u6570\u4E3A:"+JSON.stringify(p.reduce((l,t)=>(l[t.key]=t.value.value||"",l),{})))):p.every(l=>l.validator?l.validator():!0)&&((i=h.value)==null||i.close(),F.success("\u6A21\u62DF\u4FEE\u6539\u83DC\u5355\u6210\u529F, \u53C2\u6570\u4E3A:"+JSON.stringify(p.reduce((l,t)=>(l[t.key]=t.value.value||"",l),{}))))}function x(s){X.confirm({title:"\u63D0\u793A",content:"\u662F\u5426\u8981\u5220\u9664\u6B64\u6570\u636E\uFF1F",okText:"\u5220\u9664",cancelText:"\u53D6\u6D88",onOk:()=>{F.success("\u6A21\u62DF\u5220\u9664\u6210\u529F\uFF0C\u53C2\u6570\u4E3A\uFF1A"+JSON.stringify(s))}})}return R(k),T(N({rowKey:U,actionModel:a,modalDialog:h,dataForm:I},o),{treeData:r,itemFormOptions:p,tableColumns:g,onAddItem:A,onDeleteItem:x,onUpdateItem:w,onConfirm:E})}}),te={class:"main-container"};function oe(a,o,r,h,I,U){const g=d("AddButton"),p=d("TableHeader"),y=d("a-tag"),k=d("a-button"),A=d("a-space"),w=d("a-table-column"),E=d("a-table"),x=d("TableBody"),s=d("a-tree-select"),i=d("a-input"),l=d("IconSelector"),t=d("a-switch"),b=d("a-form-item"),O=d("a-form"),q=d("ModalDialog");return v(),B("div",te,[f(x,null,{header:n(()=>[f(p,{"show-filter":!1},{"top-right":n(()=>[f(g,{onAdd:a.onAddItem},null,8,["onAdd"])]),_:1})]),default:n(()=>[f(E,{bordered:!1,loading:a.tableLoading,data:a.dataList,"row-key":a.rowKey,pagination:!1},{columns:n(()=>[(v(!0),B(S,null,z(a.tableColumns,e=>(v(),m(w,{key:e.key,align:e.align,title:e.title,width:e.width,"data-index":e.key,fixed:e.fixed},G({_:2},[e.key==="index"?{name:"cell",fn:n(({rowIndex:u})=>[_(C(u+1),1)])}:e.key==="icon"?{name:"cell",fn:n(({record:u})=>[(v(),m(Q(u.icon||"IconMenu"),{style:{"font-size":"18px"}}))])}:e.key==="cacheable"?{name:"cell",fn:n(({record:u})=>[f(y,{size:"small",color:u.cacheable?"blue":"red"},{default:n(()=>[_(C(u.cacheable?"\u662F":"\u5426"),1)]),_:2},1032,["color"])])}:e.key==="hidden"?{name:"cell",fn:n(({record:u})=>[f(y,{size:"small",color:u.hidden?"blue":"red"},{default:n(()=>[_(C(u.hidden?"\u662F":"\u5426"),1)]),_:2},1032,["color"])])}:e.key==="affix"?{name:"cell",fn:n(({record:u})=>[f(y,{size:"small",color:u.affix?"blue":"red"},{default:n(()=>[_(C(u.affix?"\u662F":"\u5426"),1)]),_:2},1032,["color"])])}:e.key==="actions"?{name:"cell",fn:n(({record:u})=>[f(A,null,{default:n(()=>[f(k,{status:"success",onClick:$=>a.onUpdateItem(u),size:"mini"},{default:n(()=>[_(" \u7F16\u8F91 ")]),_:2},1032,["onClick"]),f(k,{status:"danger",size:"mini",onClick:$=>a.onDeleteItem(u)},{default:n(()=>[_("\u5220\u9664")]),_:2},1032,["onClick"])]),_:2},1024)])}:void 0]),1032,["align","title","width","data-index","fixed"]))),128))]),_:1},8,["loading","data","row-key"])]),_:1}),f(q,{ref:"modalDialog",title:a.actionModel==="add"?"\u6DFB\u52A0\u83DC\u5355":"\u7F16\u8F91\u83DC\u5355",onConfirm:a.onConfirm,"content-height":"50vh"},{content:n(()=>[f(O,{model:{},wrapperCol:{span:18}},{default:n(()=>[(v(!0),B(S,null,z(a.itemFormOptions,e=>(v(),m(b,{class:W([e.required?"form-item__require":"form-item__no_require"]),label:e.label,key:e.key},{default:n(()=>[e.type==="tree-select"?(v(),m(s,{key:0,modelValue:e.value.value,"onUpdate:modelValue":u=>e.value.value=u,style:{width:"100%"},"dropdown-style":{maxHeight:"400px",overflow:"auto"},placeholder:e.placeholder,"allow-clear":"",data:a.treeData},null,8,["modelValue","onUpdate:modelValue","placeholder","data"])):D("v-if",!0),e.type==="input"?(v(),m(i,{key:1,modelValue:e.value.value,"onUpdate:modelValue":u=>e.value.value=u,placeholder:e.placeholder,disabled:e.disabled?e.disabled.value:!1},null,8,["modelValue","onUpdate:modelValue","placeholder","disabled"])):D("v-if",!0),e.type==="icon"?(v(),m(l,{key:2,value:e.value.value,"onUpdate:value":u=>e.value.value=u},null,8,["value","onUpdate:value"])):D("v-if",!0),e.type==="switch"?(v(),m(t,{key:3,modelValue:e.value.value,"onUpdate:modelValue":u=>e.value.value=u},null,8,["modelValue","onUpdate:modelValue"])):D("v-if",!0)]),_:2},1032,["class","label"]))),128))]),_:1})]),_:1},8,["title","onConfirm"])])}var ie=Y(ne,[["render",oe]]);export{ie as default};
